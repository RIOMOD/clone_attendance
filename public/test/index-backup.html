<!DOCTYPE html>
<html lang="vi">

<head>
    <!-- ===== THÔNG TIN META VÀ CẤU HÌNH TRANG ===== -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Hệ thống chấm công CTSV - Trang chủ</title>

    <!-- Early compatibility & polyfills -->
    <script src="assets/js/compat.js" defer></script>
    <noscript>
        <style>
            body {
                font-family: Arial, sans-serif;
                padding: 20px;
            }

            .no-js-warning {
                background: #ffeb3b;
                padding: 12px;
                border-radius: 6px;
                font-size: 14px;
            }
        </style>
        <div class="no-js-warning">Trình duyệt của bạn đang tắt JavaScript. Vui lòng bật để sử dụng hệ thống.</div>
    </noscript>

    <!-- ===== LIÊN KẾT CSS VÀ FONT ===== -->
    <!-- Enhanced CSS System -->
    <link rel="stylesheet" href="assets/css/global-enhanced.css">
    <link rel="stylesheet" href="assets/css/components-enhanced.css">
    <link rel="stylesheet" href="assets/css/responsive-comprehensive-enhanced.css">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="style-enhanced.css">
    <link rel="stylesheet" href="assets/css/profile-avatar-fix.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">

    <!-- External CSS Files -->
    <link rel="stylesheet" href="assets/css/pwa-features.css">
    <link rel="stylesheet" href="assets/css/avatar-fix.css">

    <!-- PWA Manifest -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#1f314b">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="CTSV Attendance">

    <!-- PWA Icons -->
    <link rel="apple-touch-icon" sizes="180x180" href="assets/images/icons/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="32x32" href="assets/images/icons/icon-192x192.png">
    <link rel="icon" type="image/png" sizes="16x16" href="assets/images/icons/icon-192x192.png">
</head>

<body>
    <!-- ===== HEADER - THANH ĐIỀU HƯỚNG CHÍNH ===== -->
    <header class="header">
        <div class="logo">
            <i class="fas fa-clock"></i>
            <span>Attendance</span>
        </div>
        <nav class="nav-menu">
            <a href="pages/calendar/index.html" class="nav-item">Lịch tổng</a>
            <a href="#" class="nav-item active">Lịch cá nhân</a>
            <div class="dropdown">
                <a href="#" class="dropdown-toggle">
                    Quản lý
                    <i class="fas fa-chevron-down"></i>
                </a>
                <div class="dropdown-menu">
                    <a href="pages/operations/operations.html" class="dropdown-item">
                        <i class="fas fa-cogs"></i>
                        Vận hành
                    </a>
                    <a href="pages/CLB/clubs.html" class="dropdown-item">
                        <i class="fas fa-users"></i>
                        Tổng quan CLB
                    </a>
                    <a href="pages/CLB/clubs-list.html" class="dropdown-item">
                        <i class="fas fa-list"></i>
                        Danh sách CLB
                    </a>
                    <a href="pages/CLB/club-organizers.html" class="dropdown-item">
                        <i class="fas fa-user-tie"></i>
                        Ban chủ nhiệm
                    </a>
                    <a href="pages/CLB/club-members.html" class="dropdown-item">
                        <i class="fas fa-user-friends"></i>
                        Thành viên
                    </a>
                    <a href="pages/CLB/club-events.html" class="dropdown-item">
                        <i class="fas fa-calendar-check"></i>
                        Sự kiện CLB
                    </a>
                </div>
            </div>
            <div class="dropdown">
                <a href="#" class="dropdown-toggle">
                    Câu lạc bộ
                    <i class="fas fa-chevron-down"></i>
                </a>
                <div class="dropdown-menu">
                    <a href="#" class="dropdown-item">
                        <i class="fas fa-code"></i>
                        CLB CODEKING
                    </a>
                    <a href="#" class="dropdown-item">
                        <i class="fas fa-star"></i>
                        CLB YUME
                    </a>
                </div>
            </div>
        </nav>

        <!-- ===== SEARCH BAR ===== -->
        <div class="search-container">
            <div class="search-wrapper">
                <i class="fas fa-search search-icon"></i>
                <input type="text" class="search-input" placeholder="Tìm kiếm..." id="headerSearchInput">
                <button class="search-clear" id="searchClearBtn" style="display: none;">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="search-dropdown" id="searchDropdown">
                <div class="search-suggestions">
                    <div class="search-category">
                        <h5>Gợi ý tìm kiếm</h5>
                        <div class="suggestion-item" data-search="dashboard">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Dashboard</span>
                        </div>
                        <div class="suggestion-item" data-search="lịch công tác">
                            <i class="fas fa-calendar-alt"></i>
                            <span>Lịch công tác</span>
                        </div>
                        <div class="suggestion-item" data-search="thống kê">
                            <i class="fas fa-chart-bar"></i>
                            <span>Thống kê cá nhân</span>
                        </div>
                        <div class="suggestion-item" data-search="câu lạc bộ">
                            <i class="fas fa-users"></i>
                            <span>Câu lạc bộ</span>
                        </div>
                        <div class="suggestion-item" data-search="chấm công">
                            <i class="fas fa-clock"></i>
                            <span>Chấm công</span>
                        </div>
                    </div>
                    <div class="search-category">
                        <h5>Tìm kiếm nhanh</h5>
                        <div class="suggestion-item" data-action="checkin">
                            <i class="fas fa-sign-in-alt"></i>
                            <span>Check-in ngay</span>
                        </div>
                        <div class="suggestion-item" data-action="profile">
                            <i class="fas fa-user"></i>
                            <span>Thông tin cá nhân</span>
                        </div>
                        <div class="suggestion-item" data-action="settings">
                            <i class="fas fa-cog"></i>
                            <span>Cài đặt hệ thống</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="user-actions">
            <!-- Login/Register buttons for non-authenticated users -->
            <div class="auth-buttons" id="authButtons" style="display: none;">
                <a href="pages/authen/login-professional.html" class="auth-btn login-btn">
                    <i class="fas fa-sign-in-alt"></i>
                    <span>Đăng nhập</span>
                </a>
                <a href="pages/authen/register-professional.html" class="auth-btn register-btn">
                    <i class="fas fa-user-plus"></i>
                    <span>Đăng ký</span>
                </a>
            </div>

            <div class="user-profile-dropdown" id="userProfileDropdown">
                <div class="user-avatar-btn" id="userProfileBtn">
                    <!-- Sử dụng ảnh local đã test thành công -->
                    <img src="./assets/images/avata/avata_admin.jpg" alt="Admin Avatar" class="user-avatar-img"
                        onload="console.log('✅ Avatar loaded successfully'); console.log('Avatar src:', this.src);"
                        onerror="console.log('❌ Avatar failed to load:', this.src); this.style.display='none'; this.nextElementSibling.style.display='flex';">
                    <i class="fas fa-user-circle user-avatar-fallback"></i>
                </div>
                <div class="profile-dropdown-menu" id="profileDropdown">
                    <div class="profile-header">
                        <div class="profile-avatar">
                            <!-- Sử dụng ảnh local đã test thành công -->
                            <img src="./assets/images/avata/avata_admin.jpg" alt="Admin Avatar"
                                class="profile-avatar-img" onload="console.log('✅ Profile avatar loaded successfully');"
                                onerror="console.log('❌ Profile avatar failed to load:', this.src); this.style.display='none'; this.nextElementSibling.style.display='flex';">
                            <i class="fas fa-user-circle"></i>
                        </div>
                        <div class="profile-info">
                            <h4>Nguyễn Văn Admin</h4>
                            <p>admin@ctsv.edu.vn</p>
                            <span class="profile-role">Quản trị viên</span>
                        </div>
                    </div>
                    <div class="profile-divider"></div>
                    <div class="profile-menu">
                        <a href="pages/dashboard/dashboard.html" class="profile-menu-item">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Dashboard</span>
                        </a>
                        <a href="pages/profile/profile.html" class="profile-menu-item">
                            <i class="fas fa-user"></i>
                            <span>Profile</span>
                        </a>
                        <a href="#" class="profile-menu-item" onclick="openProfileModal('editProfileModal')">
                            <i class="fas fa-edit"></i>
                            <span>Chỉnh sửa thông tin cá nhân</span>
                        </a>
                        <a href="pages/statistics/index.html" class="profile-menu-item">
                            <i class="fas fa-chart-line"></i>
                            <span>Thống kê cá nhân</span>
                        </a>
                        <a href="#" class="profile-menu-item" onclick="openProfileModal('personalSettingsModal')">
                            <i class="fas fa-users-cog"></i>
                            <span>Thiết lập chức năng cá nhân</span>
                        </a>
                        <a href="#" class="profile-menu-item" onclick="openProfileModal('toolbarSettingsModal')">
                            <i class="fas fa-chart-bar"></i>
                            <span>Thiết lập thanh biểu tượng</span>
                        </a>
                        <a href="#" class="profile-menu-item" onclick="openProfileModal('loginManagementModal')">
                            <i class="fas fa-database"></i>
                            <span>Quản lý thông tin đăng nhập</span>
                        </a>
                        <div class="profile-divider"></div>
                        <a href="pages/authen/login-professional.html" class="profile-menu-item"
                            onclick="handleLogout()">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Thoát ra</span>
                        </a>
                        <div class="profile-divider"></div>
                        <a href="#" class="profile-menu-item" onclick="handleCompleteLogout()">
                            <i class="fas fa-calculator"></i>
                            <span>Tạn số & Thoát ra</span>
                        </a>
                    </div>
                </div>
            </div>
            <div class="settings-dropdown">
                <i class="fas fa-cog settings-icon" id="settingsBtn"></i>
                <div class="settings-dropdown-menu" id="settingsDropdown">
                    <div class="settings-header">
                        <h4><i class="fas fa-cog"></i> Cài đặt hệ thống</h4>
                        <p>Tùy chỉnh giao diện và chức năng</p>
                    </div>

                    <div class="settings-menu">
                        <a href="#" class="settings-menu-item" onclick="openSettingsSection('appearance')">
                            <i class="fas fa-palette"></i>
                            <span>Giao diện & Chủ đề</span>
                            <i class="fas fa-chevron-right"></i>
                        </a>
                        <a href="#" class="settings-menu-item" onclick="openSettingsSection('notifications')">
                            <i class="fas fa-bell"></i>
                            <span>Thông báo & Cảnh báo</span>
                            <i class="fas fa-chevron-right"></i>
                        </a>
                        <a href="#" class="settings-menu-item" onclick="openSettingsSection('security')">
                            <i class="fas fa-shield-alt"></i>
                            <span>Bảo mật & Quyền riêng tư</span>
                            <i class="fas fa-chevron-right"></i>
                        </a>
                        <a href="#" class="settings-menu-item" onclick="openSettingsSection('system')">
                            <i class="fas fa-cogs"></i>
                            <span>Hệ thống & Hiệu suất</span>
                            <i class="fas fa-chevron-right"></i>
                        </a>
                        <a href="#" class="settings-menu-item" onclick="openSettingsSection('attendance')">
                            <i class="fas fa-clock"></i>
                            <span>Chấm công & Thời gian</span>
                            <i class="fas fa-chevron-right"></i>
                        </a>
                        <a href="#" class="settings-menu-item" onclick="openSettingsSection('backup')">
                            <i class="fas fa-download"></i>
                            <span>Sao lưu & Phục hồi</span>
                            <i class="fas fa-chevron-right"></i>
                        </a>
                    </div>

                    <div class="settings-footer">
                        <button class="settings-btn reset-btn" onclick="resetAllSettings()">
                            <i class="fas fa-undo"></i>
                            <span>Khôi phục mặc định</span>
                        </button>
                        <button class="settings-btn about-btn" onclick="showAboutInfo()">
                            <i class="fas fa-info-circle"></i>
                            <span>Thông tin phiên bản</span>
                        </button>
                        <button class="settings-btn pwa-btn" onclick="showPWAInfo()">
                            <i class="fas fa-mobile-alt"></i>
                            <span>Thông tin PWA</span>
                        </button>
                        <button class="settings-btn install-btn" onclick="pwaManager.showInstallPrompt()">
                            <i class="fas fa-download"></i>
                            <span>Cài đặt ứng dụng</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- ===== CONTAINER CHÍNH ===== -->
    <div class="container">
        <!-- Lớp phủ sidebar cho thiết bị di động -->
        <div class="sidebar-overlay" id="sidebarOverlay"></div>

        <!-- ===== THANH ĐIỀU HƯỚNG BÊN TRÁI ===== -->
        <aside class="sidebar">
            <!-- Tiêu đề sidebar với thông tin vai trò -->
            <div class="sidebar-header">
                <div class="user-role-info">
                    <div class="role-avatar">
                        <i class="fas fa-user-tie"></i>
                    </div>
                    <div class="role-details">
                        <h4>Nguyễn Văn Admin</h4>
                        <span class="role-badge admin">👑 Boss/Admin</span>
                    </div>
                </div>
            </div>

            <!-- ===== MENU ĐIỀU HƯỚNG ===== -->
            <nav class="sidebar-nav" aria-label="Menu điều hướng chính">
                <!-- PHẦN TỔNG QUAN -->
                <div class="nav-section">
                    <div class="section-header" data-section="overview">
                        <div class="section-title">
                            <i class="fas fa-chart-line"></i>
                            <span>Tổng quan</span>
                        </div>
                        <i class="fas fa-chevron-down section-arrow"></i>
                    </div>
                    <ul class="nav-submenu">
                        <!-- Dashboard chính -->
                        <li class="nav-item active">
                            <a href="pages/dashboard/index.html" class="nav-link" title="Trang tổng quan chính">
                                <i class="fas fa-tachometer-alt"></i>
                                <span>Dashboard</span>
                            </a>
                        </li>
                        <!-- Thống kê cá nhân -->
                        <li class="nav-item">
                            <a href="pages/statistics/index.html" class="nav-link"
                                title="Xem báo cáo và thống kê cá nhân">
                                <i class="fas fa-chart-bar"></i>
                                <span>Thống kê cá nhân</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- PHẦN LỊCH & CHẤM CÔNG -->
                <div class="nav-section">
                    <div class="section-header" data-section="attendance">
                        <div class="section-title">
                            <i class="fas fa-calendar-check"></i>
                            <span>Lịch & Chấm công</span>
                        </div>
                        <i class="fas fa-chevron-down section-arrow"></i>
                    </div>
                    <ul class="nav-submenu">
                        <!-- Lịch tổng quan -->
                        <li class="nav-item">
                            <a href="pages/calendar/index.html" class="nav-link" title="Xem lịch làm việc tổng quan">
                                <i class="fas fa-calendar-alt"></i>
                                <span>Lịch tổng quan</span>
                            </a>
                        </li>
                        <!-- Chấm công -->
                        <li class="nav-item">
                            <a href="#" class="nav-link" onclick="handleCheckIn()" title="Thực hiện check-in/check-out">
                                <i class="fas fa-clock"></i>
                                <span>Check-in/Check-out</span>
                            </a>
                        </li>
                        <!-- Quản lý nghỉ phép -->
                        <li class="nav-item">
                            <a href="#" class="nav-link" title="Đăng ký và quản lý nghỉ phép">
                                <i class="fas fa-user-clock"></i>
                                <span>Nghỉ phép / Xin nghỉ</span>
                            </a>
                        </li>
                        <!-- Nhật ký làm việc -->
                        <li class="nav-item">
                            <a href="#" class="nav-link" title="Ghi chú và theo dõi công việc hàng ngày">
                                <i class="fas fa-book"></i>
                                <span>Nhật ký làm việc</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Câu lạc bộ -->
                <div class="nav-section">
                    <div class="section-header" data-section="clubs">
                        <div class="section-title">
                            <i class="fas fa-users"></i>
                            <span>Câu lạc bộ</span>
                        </div>
                        <i class="fas fa-chevron-down section-arrow"></i>
                    </div>
                    <ul class="nav-submenu">
                        <li class="nav-item">
                            <a href="pages/CLB/clubs-list.html" class="nav-link">
                                <i class="fas fa-list"></i>
                                <span>Danh sách CLB</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-crown"></i>
                                <span>Ban chủ nhiệm</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-user-friends"></i>
                                <span>Thành viên</span>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a href="#" class="nav-link">
                                <i class="fas fa-calendar-star"></i>
                                <span>Sự kiện CLB</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- PHẦN QUẢN LÝ NHÓM -->
                <div class="nav-section">
                    <div class="section-header" data-section="management">
                        <div class="section-title">
                            <i class="fas fa-users-cog"></i>
                            <span>Quản lý nhóm</span>
                        </div>
                        <i class="fas fa-chevron-down section-arrow"></i>
                    </div>
                    <ul class="nav-submenu">
                        <!-- Quản lý cộng tác viên -->
                        <li class="nav-item">
                            <a href="#" class="nav-link" title="Quản lý danh sách cộng tác viên">
                                <i class="fas fa-handshake"></i>
                                <span>Cộng tác viên</span>
                            </a>
                        </li>
                        <!-- Phân công nhiệm vụ -->
                        <li class="nav-item">
                            <a href="#" class="nav-link" title="Phân công và theo dõi nhiệm vụ">
                                <i class="fas fa-tasks"></i>
                                <span>Phân công nhiệm vụ</span>
                            </a>
                        </li>
                        <!-- Duyệt báo cáo -->
                        <li class="nav-item">
                            <a href="#" class="nav-link" title="Xem xét và phê duyệt báo cáo">
                                <i class="fas fa-check-circle"></i>
                                <span>Duyệt báo cáo</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- PHẦN QUẢN LÝ HỆ THỐNG (CHỈ ADMIN) -->
                <div class="nav-section admin-section">
                    <div class="section-header" data-section="admin">
                        <div class="section-title">
                            <i class="fas fa-shield-alt"></i>
                            <span>Quản lý hệ thống</span>
                            <span class="admin-badge">ADMIN</span>
                        </div>
                        <i class="fas fa-chevron-down section-arrow"></i>
                    </div>
                    <ul class="nav-submenu">
                        <!-- Quản lý người dùng -->
                        <li class="nav-item">
                            <a href="#" class="nav-link" title="Quản lý tài khoản người dùng">
                                <i class="fas fa-users-cog"></i>
                                <span>Quản lý người dùng</span>
                            </a>
                        </li>
                        <!-- Xuất báo cáo tổng hợp -->
                        <li class="nav-item">
                            <a href="#" class="nav-link" title="Tạo và xuất báo cáo tổng hợp">
                                <i class="fas fa-file-export"></i>
                                <span>Xuất báo cáo tổng hợp</span>
                            </a>
                        </li>
                        <!-- Cài đặt phân quyền -->
                        <li class="nav-item">
                            <a href="#" class="nav-link" title="Quản lý quyền hạn và vai trò">
                                <i class="fas fa-cogs"></i>
                                <span>Cài đặt phân quyền</span>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- PHẦN HỖ TRỢ -->
                <div class="nav-section">
                    <div class="section-header" data-section="support">
                        <div class="section-title">
                            <i class="fas fa-life-ring"></i>
                            <span>Hỗ trợ</span>
                        </div>
                        <i class="fas fa-chevron-down section-arrow"></i>
                    </div>
                    <ul class="nav-submenu">
                        <!-- Hướng dẫn sử dụng -->
                        <li class="nav-item">
                            <a href="#" class="nav-link" title="Xem hướng dẫn chi tiết">
                                <i class="fas fa-question-circle"></i>
                                <span>Hướng dẫn sử dụng</span>
                            </a>
                        </li>
                        <!-- Video hướng dẫn -->
                        <li class="nav-item">
                            <a href="#" class="nav-link" title="Xem video giới thiệu chức năng">
                                <i class="fas fa-video"></i>
                                <span>Video giới thiệu</span>
                            </a>
                        </li>
                        <!-- Tài nguyên tải về -->
                        <li class="nav-item">
                            <a href="#" class="nav-link" title="Tải về tài liệu và mẫu biểu">
                                <i class="fas fa-download"></i>
                                <span>Tài nguyên tải về</span>
                            </a>
                        </li>
                    </ul>
                </div>
            </nav>

            <!-- ===== CHÂN SIDEBAR ===== -->
            <div class="sidebar-footer">
                <div class="version-info">
                    <small>Phiên bản 0.0.1</small>
                    <br>
                    <small>© 2025 CTSV System</small>
                </div>
            </div>
        </aside>

        <!-- ===== NỘI DUNG CHÍNH ===== -->
        <main class="main-content">
            <!-- ===== BẢNG ĐIỀU KHIỂN DASHBOARD ===== -->
            <div class="dashboard-grid">
                <!-- CARD CÔNG VIỆC TRONG THÁNG -->
                <div class="card workflow-card">
                    <!-- Tiêu đề card -->
                    <div class="card-header">
                        <h3><i class="fas fa-tasks"></i> Công việc trong tháng</h3>
                        <div class="card-actions">
                            <button id="refresh-tasks" title="Làm mới danh sách công việc">
                                <i class="fas fa-sync-alt"></i>
                            </button>
                            <button id="export-tasks" title="Xuất dữ liệu công việc">
                                <i class="fas fa-download"></i>
                            </button>
                        </div>
                    </div>

                    <!-- Nội dung card -->
                    <div class="workflow-content">
                        <!-- Tổng quan số liệu -->
                        <div class="tasks-summary">
                            <div class="summary-item">
                                <div class="summary-number" id="total-tasks">0</div>
                                <div class="summary-label">Tổng công việc</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-number" id="completed-tasks">0</div>
                                <div class="summary-label">Đã hoàn thành</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-number" id="pending-tasks">0</div>
                                <div class="summary-label">Đang thực hiện</div>
                            </div>
                            <div class="summary-item">
                                <div class="summary-number" id="overdue-tasks">0</div>
                                <div class="summary-label">Quá hạn</div>
                            </div>
                        </div>

                        <!-- Timeline công việc theo ngày -->
                        <div class="tasks-timeline" id="tasks-timeline">
                            <!-- Danh sách công việc theo ngày sẽ được tạo bởi JavaScript -->
                            <div class="no-tasks-message">
                                <i class="fas fa-calendar-plus"></i>
                                <p>Chưa có công việc nào trong tháng này</p>
                                <small>Click vào ngày trong lịch để thêm công việc mới</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Lịch công tác -->
                <div class="card calendar-card">
                    <div class="card-header">
                        <h3><span id="current-month-year">07/2025</span> Lịch công tác</h3>
                        <div class="card-actions">
                            <button id="prev-month"><i class="fas fa-chevron-left"></i></button>
                            <button id="next-month"><i class="fas fa-chevron-right"></i></button>
                        </div>
                    </div>
                    <div class="calendar-content">
                        <div class="calendar-header">
                            <div class="day-header">Chủ nhật</div>
                            <div class="day-header">Thứ 2</div>
                            <div class="day-header">Thứ 3</div>
                            <div class="day-header">Thứ 4</div>
                            <div class="day-header">Thứ 5</div>
                            <div class="day-header">Thứ 6</div>
                            <div class="day-header">Thứ 7</div>
                        </div>
                        <div class="calendar-grid" id="calendar-grid">
                            <!-- Calendar dates will be generated by JavaScript -->
                        </div>
                    </div>
                </div>

                <!-- Thông tin ngày hiện tại -->
                <div class="card today-info-card">
                    <div class="card-header">
                        <h3 id="today-date">Hoạt động nổi bật</h3>
                        <div class="card-actions">
                            <i class="fas fa-ellipsis-h"></i>
                        </div>
                    </div>
                    <div class="today-content">
                        <div class="today-item">
                            <strong>1. Chung</strong>
                            <p>● Loại bỏ tiểu chuẩn sáp xếp trong khung tìm kiếm, và khởi phục lại mục Sáp xếp theo ngày
                                chính sửa.</p>
                            <p>● Menu sự dụng . Các menu danh sách của</p>
                            <p>- Đơn bán hàng, Bán hàng, Đơn giao hàng, Giao hàng, Yêu cầu mua hàng, Mua hàng,</p>
                            <p>- Công ty → Danh sách hàng thông báo và lưu trữ sử</p>
                        </div>
                    </div>
                </div>

                <!-- To Do List -->
                <div class="card todo-card">
                    <div class="card-header">
                        <h3>Câu lạc bộ</h3>
                        <div class="card-actions">
                            <button id="add-todo"><i class="fas fa-plus"></i></button>
                        </div>
                    </div>
                    <div class="todo-content">
                        <div class="todo-item">
                            <input type="checkbox" id="todo1">
                            <label for="todo1">Dự định</label>
                        </div>
                        <div class="todo-item">
                            <input type="checkbox" id="todo2">
                            <label for="todo2">Việc phải làm</label>
                        </div>
                    </div>
                </div>

                <!-- Phê duyệt -->
                <div class="card approval-card">
                    <div class="card-header">
                        <h3>Thông báo</h3>
                        <div class="card-actions">
                            <i class="fas fa-ellipsis-h"></i>
                        </div>
                    </div>
                    <div class="approval-content">
                        <p>Không có dữ liệu.</p>
                    </div>
                </div>

                <!-- Danh sách tin nhân -->
                <div class="card messages-card">
                    <div class="card-header">
                        <h3>Danh sách tin nhân</h3>
                        <div class="card-actions">
                            <i class="fas fa-ellipsis-h"></i>
                        </div>
                    </div>
                    <div class="messages-content">
                        <p>Không có dữ liệu.</p>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <!-- Modal for work log -->
    <div id="workLogModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Lịch công tác mới</h3>
                <span class="close">&times;</span>
            </div>
            <div class="modal-body">
                <form id="workLogForm">
                    <div class="form-group">
                        <label for="workTitle">Tiêu đề</label>
                        <input type="text" id="workTitle" name="workTitle" required>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="workType">Loại lịch làm việc</label>
                            <select id="workType" name="workType">
                                <option value="">Loại lịch làm việc</option>
                                <option value="meeting">Họp</option>
                                <option value="training">Đào tạo</option>
                                <option value="project">Dự án</option>
                                <option value="other">Khác</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="workCalendar">Lịch</label>
                            <select id="workCalendar" name="workCalendar">
                                <option value="personal">Cá nhân</option>
                                <option value="team">Nhóm</option>
                                <option value="company">Công ty</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="workLocation">Địa điểm</label>
                        <input type="text" id="workLocation" name="workLocation">
                    </div>

                    <div class="form-group">
                        <label for="workAssignee">Gần nhận</label>
                        <input type="text" id="workAssignee" name="workAssignee">
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="workDate">Ngày làm việc</label>
                            <input type="date" id="workDate" name="workDate" required>
                        </div>

                        <div class="form-group">
                            <label for="workStartTime">Giờ bắt đầu</label>
                            <input type="time" id="workStartTime" name="workStartTime" required>
                        </div>

                        <div class="form-group">
                            <label for="workEndTime">Giờ kết thúc</label>
                            <input type="time" id="workEndTime" name="workEndTime" required>
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="workDurationHours">Thời lượng (giờ)</label>
                            <input type="number" id="workDurationHours" name="workDurationHours" min="0.5" step="0.5"
                                value="1">
                        </div>

                        <div class="form-group">
                            <label for="workPriority">Mức độ ưu tiên</label>
                            <select id="workPriority" name="workPriority">
                                <option value="low">Thấp</option>
                                <option value="medium" selected>Trung bình</option>
                                <option value="high">Cao</option>
                                <option value="urgent">Khẩn cấp</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <input type="checkbox" id="allDay" name="allDay">
                        <label for="allDay">Tất cả ngày Lặp lại</label>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="workParticipants">Người tham dự</label>
                            <input type="text" id="workParticipants" name="workParticipants"
                                placeholder="Nhập tên người tham dự">
                        </div>

                        <div class="form-group">
                            <label for="workGuest">Guest</label>
                            <input type="text" id="workGuest" name="workGuest" placeholder="Khách mời">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="workCategory">Chia sẻ</label>
                            <select id="workCategory" name="workCategory">
                                <option value="private">Riêng tư</option>
                                <option value="public">Công khai</option>
                                <option value="team">Nhóm</option>
                            </select>
                        </div>

                        <div class="form-group">
                            <label for="workPermission">Quyền hạn</label>
                            <select id="workPermission" name="workPermission">
                                <option value="edit">Chỉnh sửa</option>
                                <option value="view">Xem</option>
                                <option value="admin">Quản trị</option>
                            </select>
                        </div>
                    </div>

                    <div class="form-group">
                        <input type="checkbox" id="reminder" name="reminder">
                        <label for="reminder">Sử dụng</label>
                    </div>

                    <div class="form-group">
                        <label for="workNote">Nhắc nhở</label>
                        <textarea id="workNote" name="workNote" rows="4" placeholder="Ghi chú công việc..."></textarea>
                    </div>

                    <div class="form-group">
                        <label for="workDescription">Định kèm</label>
                        <textarea id="workDescription" name="workDescription" rows="4"
                            placeholder="Mô tả chi tiết..."></textarea>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="closeModal()">Đóng</button>
                <button type="submit" form="workLogForm" class="btn btn-primary">Lưu</button>
            </div>
        </div>
    </div>

    <!-- Time tracking widgets popup -->
    <div class="time-widgets-popup">
        <!-- Floating trigger button -->
        <div class="time-widgets-trigger" id="timeWidgetsTrigger">
            <i class="fas fa-clock"></i>
            <span class="trigger-tooltip">Chấm công</span>
        </div>

        <!-- Popup container -->
        <div class="time-widgets-popup-container" id="timeWidgetsPopup">
            <div class="popup-header">
                <h4><i class="fas fa-clock"></i> Chấm công & Thời gian</h4>
                <button class="popup-close" id="timeWidgetsClose">
                    <i class="fas fa-times"></i>
                </button>
            </div>

            <div class="popup-content">
                <!-- Current time display -->
                <div class="current-time-display">
                    <div class="current-time" id="currentTimeDisplay">
                        <span class="time-label">Thời gian hiện tại</span>
                        <span class="time-value" id="currentTime">--:--:--</span>
                        <span class="date-value" id="currentDate">-- / -- / ----</span>
                    </div>
                </div>

                <!-- Time widgets grid -->
                <div class="time-widgets-grid">
                    <div class="time-widget checkin-widget">
                        <button id="checkinBtn" class="time-btn">
                            <i class="fas fa-sign-in-alt"></i>
                            <span>Check In</span>
                            <div class="time-display" id="checkinTime">--:--</div>
                        </button>
                    </div>

                    <div class="time-widget checkout-widget">
                        <button id="checkoutBtn" class="time-btn">
                            <i class="fas fa-sign-out-alt"></i>
                            <span>Check Out</span>
                            <div class="time-display" id="checkoutTime">--:--</div>
                        </button>
                    </div>

                    <div class="time-widget break-widget">
                        <button id="breakBtn" class="time-btn">
                            <i class="fas fa-coffee"></i>
                            <span>Nghỉ giải lao</span>
                            <div class="time-display" id="breakTime">--:--</div>
                        </button>
                    </div>

                    <div class="time-widget total-widget">
                        <div class="time-info">
                            <i class="fas fa-hourglass-half"></i>
                            <span>Tổng thời gian</span>
                            <div class="time-display" id="totalTime">0:00:00</div>
                        </div>
                    </div>
                </div>

                <!-- Status display -->
                <div class="work-status">
                    <div class="status-item">
                        <span class="status-label">Trạng thái:</span>
                        <span class="status-value" id="workStatus">Chưa check-in</span>
                    </div>
                    <div class="status-item">
                        <span class="status-label">Thời gian làm việc:</span>
                        <span class="status-value" id="workDuration">0:00:00</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Notification container for time widgets -->
        <div class="time-notification-container" id="timeNotificationContainer"></div>
    </div>

    <!-- Profile Modals -->
    <div class="modal-overlay" id="modalOverlay"></div>

    <!-- Profile Information Modal -->
    <div class="profile-modal" id="profileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-user"></i> Thông tin cá nhân</h3>
                <button class="modal-close" onclick="closeProfileModal('profileModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="profile-avatar-section">
                    <div class="avatar-preview">
                        <img id="profileAvatarDisplay" src="assets/images/avata/avata_admin.jpg" alt="Admin Avatar">
                        <i class="fas fa-user-circle" style="display: none;"></i>
                    </div>
                    <div class="profile-details">
                        <h4>Nguyễn Văn Admin</h4>
                        <p class="email">admin@ctsv.edu.vn</p>
                        <span class="role-badge">Quản trị viên</span>
                    </div>
                </div>
                <form id="profileForm" class="profile-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="fullName">Họ và tên</label>
                            <input type="text" id="fullName" name="fullName" value="Nguyễn Văn Admin" required>
                        </div>
                        <div class="form-group">
                            <label for="email">Email</label>
                            <input type="email" id="email" name="email" value="admin@ctsv.edu.vn" readonly>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="phone">Số điện thoại</label>
                            <input type="tel" id="phone" name="phone" placeholder="Nhập số điện thoại">
                        </div>
                        <div class="form-group">
                            <label for="position">Chức vụ</label>
                            <input type="text" id="position" name="position" value="Quản trị viên" readonly>
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="department">Phòng ban</label>
                            <select id="department" name="department">
                                <option value="ctsv">Công tác sinh viên</option>
                                <option value="it">Công nghệ thông tin</option>
                                <option value="hr">Nhân sự</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="birthDate">Ngày sinh</label>
                            <input type="date" id="birthDate" name="birthDate">
                        </div>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary"
                            onclick="closeProfileModal('profileModal')">Đóng</button>
                        <button type="submit" class="btn btn-primary">Lưu thay đổi</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Edit Profile Modal -->
    <div class="profile-modal" id="editProfileModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-edit"></i> Chỉnh sửa thông tin cá nhân</h3>
                <button class="modal-close" onclick="closeProfileModal('editProfileModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="profile-avatar-section">
                    <div class="avatar-preview">
                        <img id="avatarPreview" src="assets/images/avata/avata_admin.jpg" alt="Avatar">
                        <i class="fas fa-user-circle" style="display: none;"></i>
                        <div class="avatar-overlay">
                            <i class="fas fa-camera"></i>
                        </div>
                    </div>
                    <input type="file" id="avatarInput" accept="image/*" style="display: none;">
                    <button type="button" class="btn btn-outline"
                        onclick="document.getElementById('avatarInput').click()">
                        <i class="fas fa-upload"></i> Thay đổi ảnh đại diện
                    </button>
                </div>
                <form id="editProfileForm" class="profile-form">
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editFullName">Họ và tên</label>
                            <input type="text" id="editFullName" name="fullName" value="Nguyễn Văn Admin" required>
                        </div>
                        <div class="form-group">
                            <label for="editNickname">Tên hiển thị</label>
                            <input type="text" id="editNickname" name="nickname" placeholder="Tên hiển thị">
                        </div>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editPhone">Số điện thoại</label>
                            <input type="tel" id="editPhone" name="phone" placeholder="Nhập số điện thoại">
                        </div>
                        <div class="form-group">
                            <label for="editGender">Giới tính</label>
                            <select id="editGender" name="gender">
                                <option value="">Chọn giới tính</option>
                                <option value="male">Nam</option>
                                <option value="female">Nữ</option>
                                <option value="other">Khác</option>
                            </select>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="editBio">Giới thiệu bản thân</label>
                        <textarea id="editBio" name="bio" rows="3"
                            placeholder="Viết vài dòng về bản thân..."></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary"
                            onclick="closeProfileModal('editProfileModal')">Hủy</button>
                        <button type="submit" class="btn btn-primary">Cập nhật</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Personal Settings Modal -->
    <div class="profile-modal" id="personalSettingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-users-cog"></i> Thiết lập chức năng cá nhân</h3>
                <button class="modal-close" onclick="closeProfileModal('personalSettingsModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="settings-section">
                    <h4><i class="fas fa-bell"></i> Thông báo</h4>
                    <div class="setting-item">
                        <label class="switch">
                            <input type="checkbox" id="emailNotifications" checked>
                            <span class="slider"></span>
                        </label>
                        <div class="setting-info">
                            <span>Thông báo email</span>
                            <small>Nhận thông báo qua email</small>
                        </div>
                    </div>
                    <div class="setting-item">
                        <label class="switch">
                            <input type="checkbox" id="pushNotifications">
                            <span class="slider"></span>
                        </label>
                        <div class="setting-info">
                            <span>Thông báo đẩy</span>
                            <small>Thông báo trên trình duyệt</small>
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h4><i class="fas fa-clock"></i> Thời gian làm việc</h4>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="workStartTime">Giờ bắt đầu</label>
                            <input type="time" id="workStartTime" value="08:00">
                        </div>
                        <div class="form-group">
                            <label for="workEndTime">Giờ kết thúc</label>
                            <input type="time" id="workEndTime" value="17:00">
                        </div>
                    </div>
                </div>

                <div class="settings-section">
                    <h4><i class="fas fa-calendar"></i> Lịch làm việc</h4>
                    <div class="setting-item">
                        <label class="switch">
                            <input type="checkbox" id="weekendWork">
                            <span class="slider"></span>
                        </label>
                        <div class="setting-info">
                            <span>Làm việc cuối tuần</span>
                            <small>Cho phép chấm công cuối tuần</small>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary"
                        onclick="closeProfileModal('personalSettingsModal')">Hủy</button>
                    <button type="button" class="btn btn-primary" onclick="savePersonalSettings()">Lưu cài đặt</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Toolbar Settings Modal -->
    <div class="profile-modal" id="toolbarSettingsModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-chart-bar"></i> Thiết lập thanh biểu tượng</h3>
                <button class="modal-close" onclick="closeProfileModal('toolbarSettingsModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="toolbar-customization">
                    <h4>Tùy chỉnh thanh công cụ</h4>
                    <div class="toolbar-items">
                        <div class="toolbar-item" draggable="true">
                            <i class="fas fa-home"></i>
                            <span>Trang chủ</span>
                            <div class="item-toggle">
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider mini"></span>
                                </label>
                            </div>
                        </div>
                        <div class="toolbar-item" draggable="true">
                            <i class="fas fa-calendar"></i>
                            <span>Lịch</span>
                            <div class="item-toggle">
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider mini"></span>
                                </label>
                            </div>
                        </div>
                        <div class="toolbar-item" draggable="true">
                            <i class="fas fa-clock"></i>
                            <span>Chấm công</span>
                            <div class="item-toggle">
                                <label class="switch">
                                    <input type="checkbox" checked>
                                    <span class="slider mini"></span>
                                </label>
                            </div>
                        </div>
                        <div class="toolbar-item" draggable="true">
                            <i class="fas fa-chart-line"></i>
                            <span>Báo cáo</span>
                            <div class="item-toggle">
                                <label class="switch">
                                    <input type="checkbox">
                                    <span class="slider mini"></span>
                                </label>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" class="btn btn-secondary" onclick="resetToolbarSettings()">Đặt lại</button>
                    <button type="button" class="btn btn-primary" onclick="saveToolbarSettings()">Lưu thay đổi</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Login Management Modal -->
    <div class="profile-modal" id="loginManagementModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-database"></i> Quản lý thông tin đăng nhập</h3>
                <button class="modal-close" onclick="closeProfileModal('loginManagementModal')">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="login-sessions">
                    <h4>Phiên đăng nhập hiện tại</h4>
                    <div class="session-item current">
                        <div class="session-info">
                            <div class="session-device">
                                <i class="fas fa-desktop"></i>
                                <span>Chrome trên Windows</span>
                            </div>
                            <div class="session-details">
                                <span>IP: 192.168.1.100</span>
                                <span>Đăng nhập: 2 giờ trước</span>
                            </div>
                        </div>
                        <span class="session-status current">Hiện tại</span>
                    </div>

                    <h4>Các phiên khác</h4>
                    <div class="session-item">
                        <div class="session-info">
                            <div class="session-device">
                                <i class="fas fa-mobile-alt"></i>
                                <span>Safari trên iPhone</span>
                            </div>
                            <div class="session-details">
                                <span>IP: 192.168.1.105</span>
                                <span>Đăng nhập: 1 ngày trước</span>
                            </div>
                        </div>
                        <button class="btn btn-danger btn-sm" onclick="terminateSession('mobile')">
                            Kết thúc
                        </button>
                    </div>
                </div>

                <div class="password-section">
                    <h4>Đổi mật khẩu</h4>
                    <form id="changePasswordForm">
                        <div class="form-group">
                            <label for="currentPassword">Mật khẩu hiện tại</label>
                            <input type="password" id="currentPassword" name="currentPassword" required>
                        </div>
                        <div class="form-group">
                            <label for="newPassword">Mật khẩu mới</label>
                            <input type="password" id="newPassword" name="newPassword" required>
                        </div>
                        <div class="form-group">
                            <label for="confirmPassword">Xác nhận mật khẩu mới</label>
                            <input type="password" id="confirmPassword" name="confirmPassword" required>
                        </div>
                    </form>
                </div>

                <div class="form-actions">
                    <button type="button" class="btn btn-secondary"
                        onclick="closeProfileModal('loginManagementModal')">Đóng</button>
                    <button type="button" class="btn btn-primary" onclick="changePassword()">Đổi mật khẩu</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Profile Avatar Fallback Script -->
    <script src="assets/js/avatar-fallback.js"></script>
    <script src="assets/js/profile-dropdown.js"></script>
    <script src="assets/js/app-enhanced.js"></script>
    <script src="assets/js/navigation-enhanced.js"></script>
    <script src="assets/js/main-app.js"></script>
    <script src="assets/js/profile-avatar-manager.js"></script> <!-- Profile avatar manager -->
    <!-- Enhanced main functionality script -->
    <script src="script-enhanced.js"></script>

    <!-- Advanced Features Scripts -->
    <script src="utils/notification-advanced.js"></script> <!-- Advanced notifications with email/SMS -->
    <script src="utils/two-factor-auth.js"></script> <!-- Two-factor authentication -->
    <script src="utils/audit-log.js"></script> <!-- Audit log and activity history -->
    <script src="utils/activity-history-ui.js"></script> <!-- Activity history UI -->
    <script src="utils/pwa-manager.js"></script> <!-- PWA manager -->

</body>

</html>